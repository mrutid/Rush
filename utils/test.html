<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame
		Remove this if you use the .htaccess -->
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
		<title>new_file</title>
		<meta name="description" content="" />
		<meta name="author" content="brox" />
		<meta name="viewport" content="width=device-width; initial-scale=1.0" />
		<!-- Replace favicon.ico & apple-touch-icon.png in the root of your domain and delete these references -->
		<link rel="shortcut icon" href="/favicon.ico" />
		<link rel="apple-touch-icon" href="/apple-touch-icon.png" />
     	 <script src="http://code.jquery.com/jquery-latest.js"></script>

	<script>
function deploy(host, tag, command) { 

 tag = tag || "-";
 command = command || "-";
 
$("#error").html("");
$("#stdout").html("");
$("#stderr").html("");

	$.getJSON("http://"+host+":3000/"+tag+"/"+command+"/",
  {},
  function(data) {
    for(cmd in data) {
		if(data[cmd][0]) {
			$('<p/>').html(JSON.stringify(data[cmd][0])).appendTo("#error");
		}
		else {
			$('<p/>').html("OK").appendTo("#error");
		}
		$('<pre/>').html(data[cmd][1]).appendTo("#stdout");
		$('<pre/>').html(data[cmd][2]).appendTo("#stderr");

	}
  });
  }
 
 function do_it() {
	deploy( $('#host').val(), $('#tag').val(), $('#command').val());
 }
 
</script>

		 
		 
		 
	</head>
	<body>
		<div>
			<header>
				<h1>HttpRelayer Deployment</h1>
			</header>
			<nav>
				<p>
					<a href="/">Home</a>
				</p>
				<p>
					<a href="/contact">Contact</a>
				</p>
			</nav>
			<div>
			<form>
				<legend>Unit</legend>
				<label>Host</label><input type="text" id ="host" name="host"/><br>
				<label>Tag</label><input type="text" id="tag" name="tag" value="-"/><br>
				<label>Command</label><input type="text" id="command" name="command" value="-"/><br>
				<input id="deploy_btn" type="button" value="Deploy!" onclick="do_it()"><br>
			</form>
			</div>
			<div id="result">
				<div id="error" style="color: red; border: 1px"></div>
				<div id="stdout" style="color: black; border: 1px"></div>
				<div id="stderr" style="color: green; border: 1px"></div>
			</div>
			<footer>
				<p>
					&copy; Copyright  by TID
				</p>
			</footer>
		</div>
	</body>

</html>